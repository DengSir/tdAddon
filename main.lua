local tdAddon = tdCore:NewAddon(...)local L = tdAddon:GetLocale()local addons = {}function tdAddon:OnInit()    for i = 1, GetNumAddOns() do        tinsert(addons, {value = self('Addon'):New(i)})    end        self:InitOption{        type = 'Widget', label = L['Addons Manager'], name = 'WidgetAddonsManager',        {            type = 'ListWidget', label = L['Addons List'],            itemHeight = 24, itemList = addons, itemObject = self:GetModule('AddonItem'),            verticalArgs = {-35, -20, 0, 0},        },    }        local widget = self:GetOption():GetControl('WidgetAddonsManager')        local GUI = tdCore('GUI')        local enableAll = GUI('Button'):New(widget)    enableAll:SetText(L['Enable All'])    enableAll:SetPoint('BOTTOMLEFT', 10, 10)    enableAll:SetScript('OnClick', EnableAllAddOns)        local disableAll = GUI('Button'):New(widget)    disableAll:SetText(L['Disable All'])    disableAll:SetPoint('LEFT', enableAll, 'RIGHT', 5, 0)    disableAll:SetScript('OnClick', function()        DisableAllAddOns()        EnableAddOn(self:GetName())        EnableAddOn('tdCore')    end)        local reload = GUI('Button'):New(widget)    reload:SetText(L['Reload UI'])    reload:SetPoint('BOTTOMRIGHT', -10, 10)    reload:SetScript('OnClick', ReloadUI)        self:InitMinimap{        icon = [[Interface\Icons\Achievement_DoubleRainbow]],        scripts = {            OnCall = function()                self:ToggleOption()            end,        }    }        self:RegisterCmd('/rl')    self:SetHandle('OnSlashCmd', ReloadUI)endfunction tdAddon:Refresh()    self:GetOption():GetFrame():Update()end